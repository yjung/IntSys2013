<html>
	<head>
		<link rel="stylesheet" href="template.css">
		<script type="text/javascript">
			var ag = new Array();
			var i = 0;

			function teilnehmerLaden() {
				//document.getElementById("datenLaden").className = "hidden";
				var element = document.getElementById("content");
				var child = document.getElementById("datenLaden");
				element.removeChild(child);
				var xhr = createCORSRequest("GET","kursteilnehmer.json");
				if (!xhr) {
				  throw new Error('CORS not supported');
				}
			};

			function createCORSRequest(method, url) {
			  var xhr = new XMLHttpRequest();
			  if ("withCredentials" in xhr) {

			    // Check if the XMLHttpRequest object has a "withCredentials" property.
			    // "withCredentials" only exists on XMLHTTPRequest2 objects.
			    xhr.open(method, url, true);
			    xhr.send();
			    xhr.onreadystatechange = function() {
					if (this.readyState == this.DONE) {
						var teilnehmer = JSON.parse(xhr.responseText || null);
						var tabInput = "<table border='1'>";
						tabInput += "<tr>";
						tabInput += "<th>Vorname</th>";
						tabInput += "<th>Nachname</th>";
						tabInput += "<th>E-Mail</th>";
						tabInput += "<th>Arbeitsgruppe</th>";
						tabInput += "</tr>";
						for ( i = 0; i < teilnehmer.length; i++) {
							tabInput += "<tr>";
							tabInput += "<td>" + teilnehmer[i].vorname + "</td>";
							tabInput += "<td>" + teilnehmer[i].nachname + "</td>";
							tabInput += "<td>" + teilnehmer[i].email + "</td>";
							tabInput += "<td>" + '<input type="button" class ="inlineButton" id="addButton' + teilnehmer[i].nachname + '"name="' + teilnehmer[i].nachname + '" value="+" onclick="myAdd(name)"/>';
							tabInput += "&nbsp;" + '<input type="button" class ="inlineButton" id="RemoveButton' + teilnehmer[i].nachname + '"name="' + teilnehmer[i].nachname + '" value="-" onclick="myRemove(name)"/>' + "</td>";
							tabInput += "</tr>";
						}
						tabInput += "</table>";
						document.getElementById("tabelle").innerHTML = tabInput;
					}
				};

			  }
			  return xhr;
			}
			
			function myAdd(name) {
				ag[name] = name;
				agDraw();
			};

			function myRemove(name) {
				delete ag[name];
				agDraw();
			};

			function agDraw(){
				var agInput = "Teilnehmer der Arbeitsgruppe:";
				agInput += "<table border='1'>";
				for (n in ag){
					agInput += "<tr>";
					agInput += "<td>" + n + "</td>";
					agInput += "</tr>";
				}
				agInput += "</table>";
				document.getElementById("arbeitsgruppe").innerHTML = agInput;
			}

		</script>
	</head>
	<body>
		<div id="container">
			<div id="header">
				Header
			</div>
			<div id="navigation">
				Navigation<br>
				<a href="index.html">Link 1</a><br>
				<a href="index.html">Link 2</a><br>
				<a href="index.html">Link 3</a><br>
				<a href="index.html">Link 4</a>
			</div>
			<div id="content">
				<input 	type="button" 
						id="datenLaden" 
						value="Kursteilnehmerdaten laden" 
						onClick= "teilnehmerLaden();">
				<div id="tabelle"></div>
				<div id="arbeitsgruppe"></div>
			</div>
			<div id="footer">
				Footer
			</div>
		</div>
	</body>
</html>